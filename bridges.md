## 什么是桥

区块链中的桥是一种允许将代币或者任意数据从一个区块链网络传输到另一个区块链的连接。两条链可以具有不同的协议，规则，社区和治理模型，但是桥提供了一种兼容的方式来在双方之间安全地进行互操作。

桥接器有许多不同的设计，但它们通常可以分为两个阵营：依赖于信任或联盟的更集中的桥接器，以及更加分散的所谓“不信任”的桥接器。集中式桥接器依靠某种类型的中央权限或系统来操作，这意味着用户需要在中介者中信任才能使用给定的应用程序或服务。

相比之下，无信任桥是指用户不必将信任置于单个实体或权限中，而是将信任置于代码中内置的数学真理中的桥梁。非信任交互是由系统背后的技术（和/或激励机制）而不是由承诺或法律协议来实施的。



##  什么是轻节点

轻节点是一种只存储区块头，而不存储全量的交易列表等信息的节点。通过轻节点，可以用Merkle证明来判断一笔交易是否在现在的区块链交易列表中。



##  如何设计一个可互操作，无需信任的桥

通过在两条支持智能合约的异构的区块链中分别部署对方的轻节点合约，让链中继不断同步双方的区块头和跨链消息。



## 如何设计轻节点

![img](https://raw.githubusercontent.com/paritytech/polkadot/2daf65c7d25e32d9f96f2953f753b34153502432/bridges/diagrams/ethereum-pallet.svg)

轻节点的动作是不断接受新的 区块头，对新的区块头进行验证，对行为良好的区块头提交者(relay)进行奖励，反之惩罚。



## 如何设计relay

![img](https://raw.githubusercontent.com/paritytech/polkadot/2daf65c7d25e32d9f96f2953f753b34153502432/bridges/diagrams/bridge-relay.svg)



relay程序的主要功能是不断重复以下这个过程：

1,更新souce链的跨到target链的跨链请求。

2,处理source链发起的跨链请求。

3,将source跨链请求的处理结果更新到Target链。



跨链请求大概可以分为同步区块头请求，代币跨链请求，消息跨链请求这三种：

同步区块头请求：1,获取source链的最新区块与relay记录中最后提交给target链的区跨进行比较。

​								2,如果是处理结果的是“已经提交过的区块“，则结束这次跨链请求循环。

​								3,如果是处理结果是“新区块”，则发起一笔调用target链轻节点更新区块头的交易。



原生代币跨链请求：1,用户在source链的中发起了一笔锁仓交易。

​									2,relay捕获这笔锁仓交易，并将一个锁仓交易证明(tx  proof)发送到target链。



消息跨链请求：1,用户在source链的中发起了一笔跨链消息交易。

​							2,relay捕获到这笔交易，解析消息内容(社区治理，erc20代币跨链交易，跨链合约调用)。

​							3,将souce跨链消息解析内容组装成一笔target链交易 发送到target 链。







